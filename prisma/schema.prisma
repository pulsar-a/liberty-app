// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Book {
  id             Int              @id @default(autoincrement())
  name           String
  bookIdentifier String
  identifierType String
  authors        AuthorBook[]
  collections    CollectionBook[]

  @@unique([bookIdentifier, identifierType], name: "uniqueBookId")
}

model Author {
  id    Int          @id @default(autoincrement())
  name  String
  books AuthorBook[]
}

model AuthorBook {
  book     Book   @relation(fields: [bookId], references: [id])
  bookId   Int
  author   Author @relation(fields: [authorId], references: [id])
  authorId Int

  @@id([bookId, authorId])
}

model CollectionBook {
  book         Book       @relation(fields: [bookId], references: [id])
  bookId       Int
  author       Collection @relation(fields: [collectionId], references: [id])
  collectionId Int

  @@id([bookId, collectionId])
}

model Collection {
  id      Int              @id @default(autoincrement())
  name    String
  color   String
  content String?
  books   CollectionBook[]
  // published Boolean @default(false)
  // author    User    @relation(fields: [authorId], references: [id])
  // authorId  Int
}
